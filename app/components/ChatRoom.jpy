---
from hyperflask import request
from app.models import Message, Room

def get():
    return {"room": Room.get_or_404(request.args['id'])}

def render(room):
    return {"messages": Message.find_all(room_id=room.id, with_rels=['user'])}
---
<h1 class="text-xl p-4">#{{props.room.name}}</h1>
<{MercureStream topic=props.room class="flex-1 overflow-auto p-4" auto-scroll=True}>
    {{ messages }}
</{MercureStream}>
<{PostMessageForm room=props.room}/>
